{% load static %}
{% load app_tags %}
<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="TG Code">
    <title>Treasury</title>

    <link rel="icon" href="{% static 'assets/img/brand/favicon.png' %}" type="image/png">
    <link rel="stylesheet" href="{% static 'assets/libs/animate.css/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/libs/@fortawesome/fontawesome-free/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/libs/ionicons/css/ionicons.css' %}">


    <link rel="stylesheet" href="{% static 'assets/libs/swiper/dist/css/swiper.min.css' %}">

    <!-- Custom style -->
    <link rel="stylesheet" href="{% static 'assets/css/mega/style.css' %}" id="stylesheet">
    <link rel="stylesheet" href="{% static 'assets/css/quick-website.css' %}" id="stylesheet">
    <link rel="stylesheet" href="{% static 'assets/css/custom.css' %}" id="stylesheet">

</head>

<body>

{% include 'app/basic/navbar.html' %}

<section class="page-banner" style="background: #181717; padding-bottom: 0;">
    <div class="container-fluid">
        <div class="page-title"> Invalid page called.</div>
        <div class="user-email"><span class="font-weight-bolder">Email</span>: test@gmail.com
        </div>
    </div>
</section>

<section class="container-fluid page-subtitle">

    {% block tab_menu %}
    <div style="text-align: center">
         <a href="{% url 'app:login' %}">
             <span class="px-2 d-md-inline-flex d-sm-block tab active">
                Login
             </span>
         </a>
        <a href="{% url 'app:login' %}">
            <span class="px-2 d-md-inline-flex d-sm-block tab " style="border-left: 1px solid grey;">
                 Create Account
            </span>
        </a>
        <a href="{% url 'app:password_reset' %}">
            <span class="px-2 d-md-inline-flex d-sm-block tab " style="border-left: 1px solid grey;">
                 Reset Password
            </span>
        </a>
    </div>
    {% endblock %}

</section>



{% include "app/basic/footer.html" %}

<!-- Core JS  -->
<script src="{% static 'assets/js/jquery.js' %}"></script>
<script src="{% static 'assets/js/jquery.migrate.js' %}"></script>

<script src="{% static 'assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'assets/libs/svg-injector/dist/svg-injector.min.js' %}"></script>
<script src="{% static 'assets/libs/feather-icons/dist/feather.min.js' %}"></script>
<!-- Optional JS -->
<script src="{% static 'assets/libs/in-view/dist/in-view.min.js' %}"></script>
<script src="{% static 'assets/libs/sticky-kit/dist/sticky-kit.min.js' %}"></script>
<script src="{% static 'assets/libs/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
<!-- Page JS -->
<script src="{% static 'assets/libs/bootstrap-notify/bootstrap-notify.min.js' %}"></script>
<script src="{% static 'assets/libs/autosize/dist/autosize.min.js' %}"></script>
<script src="{% static 'assets/libs/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js' %}"></script>
<script src="{% static 'assets/libs/easescroll/jquery.easeScroll.js' %}"></script>
<script src="{% static 'assets/libs/owl.carousel/owl.carousel.js' %}"></script>
<!-- Quick JS -->

<script src="{% static 'assets/js/e-magz.js' %}"></script>
<script src="{% static 'assets/js/quick-website.js' %}"></script>


<!-- Feather Icons -->
<script>
    feather.replace({
        'width': '1em',
        'height': '1em'
    });

    function login(){
        let email = $('#input-name').val();
        var token = '{{csrf_token}}';
        $.ajax({
            headers: {
                "X-CSRFToken": token
            },
            type: 'post',
            url: "{% url 'account_cycle:account_api' %}",
            data:JSON.stringify({
                'function_name': 'account_status',
                'arguments': {
                    'user_email': email,
                },
                'source_caller': 'front-end-function10',
            }),
            success: function (data){

               if (data.error){
                      $('#msg').text(data['error']);
               }
               else{
                   if(data.results.is_exist === 'False') {
                       $('#msg').text('Account does not exist.');
                   }
                   else if(data.results.is_exist === 'True' && data.results.is_active === 'False'){
                       $('#msg').text('Account is not active.');
                   }
                   else if(data.results.is_exist === 'True' && data.results.is_active === 'True'){
                       $('#msg').text('Account is Good.');
                       // after redirect;
                        account_profile();
                   }
                   else{
                       $('#msg').text('except');
                   }
               }
            }
        });

    }

    function account_profile(){
        let email = $('#input-name').val();
        let password = $('#input-password').val();
        var token = '{{csrf_token}}';
        $.ajax({
            headers: {
                "X-CSRFToken": token
            },
            type: 'post',
            url: "{% url 'account_cycle:account_api' %}",
            data:JSON.stringify({
                'function_name': 'account_profile',
                'arguments': {
                    'user_email': email,
                    'password': password,
                },
                'source_caller': 'front-end-function10',
            }),
            success: function (data){

               if (data.error){
                   $('#msg').text(data['error']);
               }
               else{
                   document.location.href = "{% url 'account_cycle:profile' %}";
               }

            }
        });
    }

</script>

</body>

</html>